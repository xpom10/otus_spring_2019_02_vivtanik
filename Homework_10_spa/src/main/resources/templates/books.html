<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>List of all books</title>
    <style type="text/css">
        body {
            padding: 50px;
        }

        .books td {
            border: 1px solid lightgray;
            padding: 5px;
        }
    </style>
    <script src="webjars/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<h1>Библиотека</h1>

<table class="books">
    <thead>
    <tr>
        <th>Заголовок</th>
        <th>Жанр</th>
        <th>Автор</th>
        <th>Редактирование</th>
        <th>Удалить</th>
    </tr>
    </thead>
    <tbody id="booksBody">
    </tbody>
</table>
<button><a th:href="@{/add}" href="add.html">Добавить книгу</a></button>

<script>

    $(function () {
        $.get('/api/books').done(function (books) {
            books.forEach(function (books) {
                $('tbody#booksBody').append(`
                    <tr>
                        <td><a href="/book?id=${books.id}">${books.title}</a></td>
                        <td>${books.genreName}</td>
                        <td><a href="/author?id=${books.author.id}">${books.author.authorName}</a></td>
                        <td><button><a href="/edit?id=${books.id}">Редактировать</a></button></td>
                        <td>
                            <form action="/delete?id=${books.id}" method="post">
                            <button type="submit" onClick="return confirm('Уверен, что хочешь удалить книгу?')">Удалить</button>
                            </form>
                        </td>
                    </tr>
                `);
            });
        })
    });

</script>
</body>
</html>
